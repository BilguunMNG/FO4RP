#define __CONFIG_CACHE_MODULE__
#include "config_cache_h.fos"


dictionary ConfigFiles;

iConfig@ GetConfig( string& filePath )
{
	iConfig@ result = null;
	 if( !ConfigFiles.get( filePath, @result ) )
	 {
	 	// try load and cache if not cached yet
	 	@result = CreateConfig();	
	 	if( result.Parse( filePath, false ) )
	 	{
	 		ConfigFiles.set( filePath, @result );
	 	}
	 	else
	 	@result = null;
	 }

	return result;
}